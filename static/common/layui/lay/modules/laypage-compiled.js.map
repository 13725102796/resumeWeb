{"version":3,"sources":["laypage.js"],"names":[],"mappings":"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","file":"laypage-compiled.js","sourcesContent":["/**\n \n @Name : layui.laypage 分页组件\n @Author：贤心\n @License：LGPL\n \n */\n\nlayui.define(function(exports){\n  \"use strict\";\n\n  function laypage(options){\n    var skin = 'laypagecss';\n    new Page(options);\n  }\n\n  var doc = document, id = 'getElementById', tag = 'getElementsByTagName';\n  var index = 0, Page = function(options){\n    var that = this;\n    var conf = that.config = options || {};\n    conf.item = index++;\n    that.render(true);\n  };\n\n  Page.on = function(elem, even, fn){\n    elem.attachEvent ? elem.attachEvent('on'+ even, function(){\n      fn.call(elem, window.even); //for ie, this指向为当前dom元素\n    }) : elem.addEventListener(even, fn, false);\n    return Page;\n  };\n\n  //判断传入的容器类型\n  Page.prototype.type = function(){\n    var conf = this.config;\n    if(typeof conf.cont === 'object'){\n      return conf.cont.length === undefined ? 2 : 3;\n    }\n  };\n\n  //分页视图\n  Page.prototype.view = function(){\n    var that = this, conf = that.config, view = [], dict = {};\n    conf.pages = conf.pages|0;\n    conf.curr = (conf.curr|0) || 1;\n    conf.groups = 'groups' in conf ? (conf.groups|0) : 5;\n    conf.first = 'first' in conf ? conf.first : '&#x9996;&#x9875;';\n    conf.last = 'last' in conf ? conf.last : '&#x672B;&#x9875;';\n    conf.prev = 'prev' in conf ? conf.prev : '&#x4E0A;&#x4E00;&#x9875;';\n    conf.next = 'next' in conf ? conf.next : '&#x4E0B;&#x4E00;&#x9875;';\n    \n    if(conf.pages <= 1){\n      return '';\n    }\n    \n    if(conf.groups > conf.pages){\n      conf.groups = conf.pages;\n    }\n    \n    //计算当前组\n    dict.index = Math.ceil((conf.curr + ((conf.groups > 1 && conf.groups !== conf.pages) ? 1 : 0))/(conf.groups === 0 ? 1 : conf.groups));\n    \n    //当前页非首页，则输出上一页\n    if(conf.curr > 1 && conf.prev){\n      view.push('<a href=\"javascript:;\" class=\"layui-laypage-prev\" data-page=\"'+ (conf.curr - 1) +'\">'+ conf.prev +'</a>');\n    }\n    \n    //当前组非首组，则输出首页\n    if(dict.index > 1 && conf.first && conf.groups !== 0){\n      view.push('<a href=\"javascript:;\" class=\"laypage_first\" data-page=\"1\"  title=\"&#x9996;&#x9875;\">'+ conf.first +'</a><span>&#x2026;</span>');\n    }\n    \n    //输出当前页组\n    dict.poor = Math.floor((conf.groups-1)/2);\n    dict.start = dict.index > 1 ? conf.curr - dict.poor : 1;\n    dict.end = dict.index > 1 ? (function(){\n      var max = conf.curr + (conf.groups - dict.poor - 1);\n      return max > conf.pages ? conf.pages : max;\n    }()) : conf.groups;\n    if(dict.end - dict.start < conf.groups - 1){ //最后一组状态\n      dict.start = dict.end - conf.groups + 1;\n    }\n    for(; dict.start <= dict.end; dict.start++){\n      if(dict.start === conf.curr){\n        view.push('<span class=\"layui-laypage-curr\"><em class=\"layui-laypage-em\" '+ (/^#/.test(conf.skin) ? 'style=\"background-color:'+ conf.skin +';' : '') +'\"></em><em>'+ dict.start +'</em></span>');\n      } else {\n        view.push('<a href=\"javascript:;\" data-page=\"'+ dict.start +'\">'+ dict.start +'</a>');\n      }\n    }\n    \n    //总页数大于连续分页数，且当前组最大页小于总页，输出尾页\n    if(conf.pages > conf.groups && dict.end < conf.pages && conf.last && conf.groups !== 0){\n       view.push('<span>&#x2026;</span><a href=\"javascript:;\" class=\"layui-laypage-last\" title=\"&#x5C3E;&#x9875;\"  data-page=\"'+ conf.pages +'\">'+ conf.last +'</a>');\n    }\n    \n    //当前页不为尾页时，输出下一页\n    dict.flow = !conf.prev && conf.groups === 0;\n    if(conf.curr !== conf.pages && conf.next || dict.flow){\n      view.push((function(){\n        return (dict.flow && conf.curr === conf.pages) \n        ? '<span class=\"layui-laypage-nomore\" title=\"&#x5DF2;&#x6CA1;&#x6709;&#x66F4;&#x591A;\">'+ conf.next +'</span>'\n        : '<a href=\"javascript:;\" class=\"layui-laypage-next\" data-page=\"'+ (conf.curr + 1) +'\">'+ conf.next +'</a>';\n      }()));\n    }\n\n    return '<div class=\"layui-laypage layui-laypage-'+ (conf.skin ? (function(skin){\n      return /^#/.test(skin) ? 'molv' : skin;\n    }(conf.skin)) : 'default') +'\" id=\"layui-laypage-'+ that.config.item +'\">'+ view.join('') + function(){\n      return conf.skip \n      ? '<span class=\"layui-laypage-total\">&#x5230;&#x7B2C; <input type=\"number\" min=\"1\" onkeyup=\"this.value=this.value.replace(/\\\\D/, \\'\\');\" value=\"'+ conf.curr +'\" class=\"layui-laypage-skip\"> &#x9875; '\n      + '<button type=\"button\" class=\"layui-laypage-btn\">&#x786e;&#x5b9a;</button></span>' \n      : '';\n    }() +'</div>';\n  };\n\n  //跳页\n  Page.prototype.jump = function(elem){\n    if(!elem) return;\n    var that = this, conf = that.config, childs = elem.children;\n    var btn = elem[tag]('button')[0];\n    var input = elem[tag]('input')[0];\n    for(var i = 0, len = childs.length; i < len; i++){\n      if(childs[i].nodeName.toLowerCase() === 'a'){\n        Page.on(childs[i], 'click', function(){\n          var curr = this.getAttribute('data-page')|0;\n          conf.curr = curr;\n          that.render();\n          \n        });\n      }\n    }\n    if(btn){\n      Page.on(btn, 'click', function(){\n        var curr = input.value.replace(/\\s|\\D/g, '')|0;\n        if(curr && curr <= conf.pages){\n          conf.curr = curr;\n          that.render();\n        }\n      });\n    }\n  };\n\n  //渲染分页\n  Page.prototype.render = function(load){\n    var that = this, conf = that.config, type = that.type();\n    var view = that.view();\n    if(type === 2){\n      conf.cont.innerHTML = view;\n    } else if(type === 3){\n      conf.cont.html(view);\n    } else {\n      doc[id](conf.cont).innerHTML = view;\n    }\n    conf.jump && conf.jump(conf, load);\n    that.jump(doc[id]('layui-laypage-' + conf.item));\n    if(conf.hash && !load){\n      location.hash = '!'+ conf.hash +'='+ conf.curr;\n    }\n  };\n  \n  exports('laypage', laypage);\n\n});"]}