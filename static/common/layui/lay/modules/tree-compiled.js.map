{"version":3,"sources":["tree.js"],"names":[],"mappings":"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","file":"tree-compiled.js","sourcesContent":["/**\n\n @Name：layui.tree 树组件\n @Author：贤心\n @License：LGPL\n    \n */\n \n \nlayui.define('jquery', function(exports){\n  \"use strict\";\n  \n  var $ = layui.jquery;\n  var hint = layui.hint();\n  \n  var enterSkin = 'layui-tree-enter', Tree = function(options){\n    this.options = options;\n  };\n  \n  //图标\n  var icon = {\n    arrow: ['&#xe623;', '&#xe625;'] //箭头\n    ,checkbox: ['&#xe626;', '&#xe627;'] //复选框\n    ,radio: ['&#xe62b;', '&#xe62a;'] //单选框\n    ,branch: ['&#xe622;', '&#xe624;'] //父节点\n    ,leaf: '&#xe621;' //叶节点\n  };\n  \n  //初始化\n  Tree.prototype.init = function(elem){\n    var that = this;\n    elem.addClass('layui-box layui-tree'); //添加tree样式\n    if(that.options.skin){\n      elem.addClass('layui-tree-skin-'+ that.options.skin);\n    }\n    that.tree(elem);\n    that.on(elem);\n  };\n  \n  //树节点解析\n  Tree.prototype.tree = function(elem, children){\n    var that = this, options = that.options\n    var nodes = children || options.nodes;\n    \n    layui.each(nodes, function(index, item){\n      var hasChild = item.children && item.children.length > 0;\n      var ul = $('<ul class=\"'+ (item.spread ? \"layui-show\" : \"\") +'\"></ul>');\n      var li = $(['<li '+ (item.spread ? 'data-spread=\"'+ item.spread +'\"' : '') +'>'\n        //展开箭头\n        ,function(){\n          return hasChild ? '<i class=\"layui-icon layui-tree-spread\">'+ (\n            item.spread ? icon.arrow[1] : icon.arrow[0]\n          ) +'</i>' : '';\n        }()\n        \n        //复选框/单选框\n        ,function(){\n          return options.check ? (\n            '<i class=\"layui-icon layui-tree-check\">'+ (\n              options.check === 'checkbox' ? icon.checkbox[0] : (\n                options.check === 'radio' ? icon.radio[0] : ''\n              )\n            ) +'</i>'\n          ) : '';\n        }()\n        \n        //节点\n        ,function(){\n          return '<a href=\"'+ (item.href || 'javascript:;') +'\" '+ (\n            options.target && item.href ? 'target=\\\"'+ options.target +'\\\"' : ''\n          ) +'>'\n          + ('<i class=\"layui-icon layui-tree-'+ (hasChild ? \"branch\" : \"leaf\") +'\">'+ (\n            hasChild ? (\n              item.spread ? icon.branch[1] : icon.branch[0]\n            ) : icon.leaf\n          ) +'</i>') //节点图标\n          + ('<cite>'+ (item.name||'未命名') +'</cite></a>');\n        }()\n      \n      ,'</li>'].join(''));\n      \n      //如果有子节点，则递归继续生成树\n      if(hasChild){\n        li.append(ul);\n        that.tree(ul, item.children);\n      }\n      \n      elem.append(li);\n      \n      //触发点击节点回调\n      typeof options.click === 'function' && that.click(li, item); \n      \n      //伸展节点\n      that.spread(li, item);\n      \n      //拖拽节点\n      options.drag && that.drag(li, item); \n    });\n  };\n  \n  //点击节点回调\n  Tree.prototype.click = function(elem, item){\n    var that = this, options = that.options;\n    elem.children('a').on('click', function(e){\n      layui.stope(e);\n      options.click(item)\n    });\n  };\n  \n  //伸展节点\n  Tree.prototype.spread = function(elem, item){\n    var that = this, options = that.options;\n    var arrow = elem.children('.layui-tree-spread')\n    var ul = elem.children('ul'), a = elem.children('a');\n    \n    //执行伸展\n    var open = function(){\n      if(elem.data('spread')){\n        elem.data('spread', null)\n        ul.removeClass('layui-show');\n        arrow.html(icon.arrow[0]);\n        a.find('.layui-icon').html(icon.branch[0]);\n      } else {\n        elem.data('spread', true);\n        ul.addClass('layui-show');\n        arrow.html(icon.arrow[1]);\n        a.find('.layui-icon').html(icon.branch[1]);\n      }\n    };\n    \n    //如果没有子节点，则不执行\n    if(!ul[0]) return;\n    \n    arrow.on('click', open);\n    a.on('dblclick', open);\n  }\n  \n  //通用事件\n  Tree.prototype.on = function(elem){\n    var that = this, options = that.options;\n    var dragStr = 'layui-tree-drag';\n    \n    //屏蔽选中文字\n    elem.find('i').on('selectstart', function(e){\n      return false\n    });\n    \n    //拖拽\n    if(options.drag){\n      $(document).on('mousemove', function(e){\n        var move = that.move;\n        if(move.from){\n          var to = move.to, treeMove = $('<div class=\"layui-box '+ dragStr +'\"></div>');\n          e.preventDefault();\n          $('.' + dragStr)[0] || $('body').append(treeMove);\n          var dragElem = $('.' + dragStr)[0] ? $('.' + dragStr) : treeMove;\n          (dragElem).addClass('layui-show').html(move.from.elem.children('a').html());\n          dragElem.css({\n            left: e.pageX + 10\n            ,top: e.pageY + 10\n          })\n        }\n      }).on('mouseup', function(){\n        var move = that.move;\n        if(move.from){\n          move.from.elem.children('a').removeClass(enterSkin);\n          move.to && move.to.elem.children('a').removeClass(enterSkin);\n          that.move = {};\n          $('.' + dragStr).remove();\n        }\n      });\n    }\n  };\n    \n  //拖拽节点\n  Tree.prototype.move = {};\n  Tree.prototype.drag = function(elem, item){\n    var that = this, options = that.options;\n    var a = elem.children('a'), mouseenter = function(){\n      var othis = $(this), move = that.move;\n      if(move.from){\n        move.to = {\n          item: item\n          ,elem: elem\n        };\n        othis.addClass(enterSkin);\n      }\n    };\n    a.on('mousedown', function(){\n      var move = that.move\n      move.from = {\n        item: item\n        ,elem: elem\n      };\n    });\n    a.on('mouseenter', mouseenter).on('mousemove', mouseenter)\n    .on('mouseleave', function(){\n      var othis = $(this), move = that.move;\n      if(move.from){\n        delete move.to;\n        othis.removeClass(enterSkin);\n      }\n    });\n  };\n  \n  //暴露接口\n  exports('tree', function(options){\n    var tree = new Tree(options = options || {});\n    var elem = $(options.elem);\n    if(!elem[0]){\n      return hint.error('layui.tree 没有找到'+ options.elem +'元素');\n    }\n    tree.init(elem);\n  });\n});\n"]}