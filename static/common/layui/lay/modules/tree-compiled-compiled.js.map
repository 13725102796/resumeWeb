{"version":3,"sources":["tree-compiled.js"],"names":[],"mappings":"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","file":"tree-compiled-compiled.js","sourcesContent":["/**\n\n @Name：layui.tree 树组件\n @Author：贤心\n @License：LGPL\n    \n */\n\nlayui.define('jquery', function (exports) {\n  \"use strict\";\n\n  var $ = layui.jquery;\n  var hint = layui.hint();\n\n  var enterSkin = 'layui-tree-enter',\n      Tree = function (options) {\n    this.options = options;\n  };\n\n  //图标\n  var icon = {\n    arrow: ['&#xe623;', '&#xe625;'] //箭头\n    , checkbox: ['&#xe626;', '&#xe627;'] //复选框\n    , radio: ['&#xe62b;', '&#xe62a;'] //单选框\n    , branch: ['&#xe622;', '&#xe624;'] //父节点\n    , leaf: '&#xe621;' //叶节点\n  };\n\n  //初始化\n  Tree.prototype.init = function (elem) {\n    var that = this;\n    elem.addClass('layui-box layui-tree'); //添加tree样式\n    if (that.options.skin) {\n      elem.addClass('layui-tree-skin-' + that.options.skin);\n    }\n    that.tree(elem);\n    that.on(elem);\n  };\n\n  //树节点解析\n  Tree.prototype.tree = function (elem, children) {\n    var that = this,\n        options = that.options;\n    var nodes = children || options.nodes;\n\n    layui.each(nodes, function (index, item) {\n      var hasChild = item.children && item.children.length > 0;\n      var ul = $('<ul class=\"' + (item.spread ? \"layui-show\" : \"\") + '\"></ul>');\n      var li = $(['<li ' + (item.spread ? 'data-spread=\"' + item.spread + '\"' : '') + '>'\n      //展开箭头\n      , function () {\n        return hasChild ? '<i class=\"layui-icon layui-tree-spread\">' + (item.spread ? icon.arrow[1] : icon.arrow[0]) + '</i>' : '';\n      }()\n\n      //复选框/单选框\n      , function () {\n        return options.check ? '<i class=\"layui-icon layui-tree-check\">' + (options.check === 'checkbox' ? icon.checkbox[0] : options.check === 'radio' ? icon.radio[0] : '') + '</i>' : '';\n      }()\n\n      //节点\n      , function () {\n        return '<a href=\"' + (item.href || 'javascript:;') + '\" ' + (options.target && item.href ? 'target=\\\"' + options.target + '\\\"' : '') + '>' + ('<i class=\"layui-icon layui-tree-' + (hasChild ? \"branch\" : \"leaf\") + '\">' + (hasChild ? item.spread ? icon.branch[1] : icon.branch[0] : icon.leaf) + '</i>') //节点图标\n        + ('<cite>' + (item.name || '未命名') + '</cite></a>');\n      }(), '</li>'].join(''));\n\n      //如果有子节点，则递归继续生成树\n      if (hasChild) {\n        li.append(ul);\n        that.tree(ul, item.children);\n      }\n\n      elem.append(li);\n\n      //触发点击节点回调\n      typeof options.click === 'function' && that.click(li, item);\n\n      //伸展节点\n      that.spread(li, item);\n\n      //拖拽节点\n      options.drag && that.drag(li, item);\n    });\n  };\n\n  //点击节点回调\n  Tree.prototype.click = function (elem, item) {\n    var that = this,\n        options = that.options;\n    elem.children('a').on('click', function (e) {\n      layui.stope(e);\n      options.click(item);\n    });\n  };\n\n  //伸展节点\n  Tree.prototype.spread = function (elem, item) {\n    var that = this,\n        options = that.options;\n    var arrow = elem.children('.layui-tree-spread');\n    var ul = elem.children('ul'),\n        a = elem.children('a');\n\n    //执行伸展\n    var open = function () {\n      if (elem.data('spread')) {\n        elem.data('spread', null);\n        ul.removeClass('layui-show');\n        arrow.html(icon.arrow[0]);\n        a.find('.layui-icon').html(icon.branch[0]);\n      } else {\n        elem.data('spread', true);\n        ul.addClass('layui-show');\n        arrow.html(icon.arrow[1]);\n        a.find('.layui-icon').html(icon.branch[1]);\n      }\n    };\n\n    //如果没有子节点，则不执行\n    if (!ul[0]) return;\n\n    arrow.on('click', open);\n    a.on('dblclick', open);\n  };\n\n  //通用事件\n  Tree.prototype.on = function (elem) {\n    var that = this,\n        options = that.options;\n    var dragStr = 'layui-tree-drag';\n\n    //屏蔽选中文字\n    elem.find('i').on('selectstart', function (e) {\n      return false;\n    });\n\n    //拖拽\n    if (options.drag) {\n      $(document).on('mousemove', function (e) {\n        var move = that.move;\n        if (move.from) {\n          var to = move.to,\n              treeMove = $('<div class=\"layui-box ' + dragStr + '\"></div>');\n          e.preventDefault();\n          $('.' + dragStr)[0] || $('body').append(treeMove);\n          var dragElem = $('.' + dragStr)[0] ? $('.' + dragStr) : treeMove;\n          dragElem.addClass('layui-show').html(move.from.elem.children('a').html());\n          dragElem.css({\n            left: e.pageX + 10,\n            top: e.pageY + 10\n          });\n        }\n      }).on('mouseup', function () {\n        var move = that.move;\n        if (move.from) {\n          move.from.elem.children('a').removeClass(enterSkin);\n          move.to && move.to.elem.children('a').removeClass(enterSkin);\n          that.move = {};\n          $('.' + dragStr).remove();\n        }\n      });\n    }\n  };\n\n  //拖拽节点\n  Tree.prototype.move = {};\n  Tree.prototype.drag = function (elem, item) {\n    var that = this,\n        options = that.options;\n    var a = elem.children('a'),\n        mouseenter = function () {\n      var othis = $(this),\n          move = that.move;\n      if (move.from) {\n        move.to = {\n          item: item,\n          elem: elem\n        };\n        othis.addClass(enterSkin);\n      }\n    };\n    a.on('mousedown', function () {\n      var move = that.move;\n      move.from = {\n        item: item,\n        elem: elem\n      };\n    });\n    a.on('mouseenter', mouseenter).on('mousemove', mouseenter).on('mouseleave', function () {\n      var othis = $(this),\n          move = that.move;\n      if (move.from) {\n        delete move.to;\n        othis.removeClass(enterSkin);\n      }\n    });\n  };\n\n  //暴露接口\n  exports('tree', function (options) {\n    var tree = new Tree(options = options || {});\n    var elem = $(options.elem);\n    if (!elem[0]) {\n      return hint.error('layui.tree 没有找到' + options.elem + '元素');\n    }\n    tree.init(elem);\n  });\n});\n\n//# sourceMappingURL=tree-compiled.js.map"]}